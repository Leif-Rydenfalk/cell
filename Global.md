I want to turn this into a global network - thats where it will really shine. I want to keep the api exactly the same - you create a client and it checks it during compile time. But the cell type you create a client for can be anywhere in the world - you just pass the remote idea for the cell you want to use - aka the github repo for instance. This remote repo contains a list of all the currently active instances of this cell. You automatically ping all of them and if anyone is not responding you remove it from the list - to keep the list updated.

I do this instead of passing the instance id directly in the client so that it auto scales. You write your code to be able to use multiple instances and it horizontally scales automatically globally.

Do you have any objections? Thoughts? Whats going through your mind Kimi?



Do you like this approach? That we use Github to host our cells and the list which is active?

Is git source. code implementation opensource?
We ship our own cell hosted github implementation with the tiny addition of automatic cell discovery so we can use it for runtime liveness and compile time discovery.
It contains everything git does normally with two additions - 
the already compiled binaries - generated by a server for the systems which has used this particular cell.
a list of active instances and how to reach them. 



You never do this for a cell you want to use:
[dependencies]
exchange = { git = "https://cell-hub.acme.com/acme/exchange", tag = "v1.3.0" }

You do this: 
cell_remote!(ExchangeClient = "exchange");

and then specify where to look if it cant find it running locally inside the Cell.toml:
exchange = {git="https://cell-hub.acme.com/acme/exchange", tag="v1.3.0"}


The macro doesnt clone it locally unless we want to for development - you specify this in the Cell.toml. 
It looks inside the remote Cells.json for the active instances and uses them during compile time for validation then connects to those remote instances during runtime.

During compile time it pings each of the instances once - we can specify a max latency in our Cell.toml when we define the cell dependency and it will automatically install and run it locally if its below that number.


[cell]
exchange = { git = "https://cell-hub.acme.com/acme/exchange", tag = "v1.3.0" }

[cell.exchange.policy]
max_latency_ms = 500          # if best remote ping > 500 ms → build & spawn local
auto_spawn = true             # allowed to synthesise + run on the dev machine
offline_vendor = false        # set to true for air-gap builds (skips network)


Build script emitted by the macro
Look for running Unix socket ~/.cell/run/exchange.sock.
– If present and fingerprint matches remote manifest → use it, finish.
Else HTTPS GET …/exchange/Cell.json + /instances.json (cached).
Parallel compile-time ping to every returned instance (UDP QUIC probe or TCP handshake).
If best RTT ≤ max_latency_ms → embed that instance list, done.
Else if auto_spawn == true →
a.  Ribosome synthesises the binary (cached in ~/.cell/cache).
b.  Capsid spawns it locally (--membrane flag).
c.  Wait for socket to appear (with 5 s timeout).
d.  Embed localhost as the only initial instance.
Else → build error: “exchange too far and local spawn disabled”.




can we use cell in the cell sdk? If we want to implement say github implementation into cell sdk can we let cell sdk communicate to the cell-git instances which are running?

sudo ufw allow 40000/udp